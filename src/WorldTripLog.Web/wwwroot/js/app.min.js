(function(){"use strict";angular.module("app-trips",["ngRoute"]).config(function(n){n.when("/",{controller:"tripsController",controllerAs:"vm",templateUrl:"../views/trips.html"});n.when("/editor/:tripName",{controller:"tripEditorController",controllerAs:"vm",templateUrl:"../views/tripEditor.html"});n.otherwise({redirectTo:"/"})})})(),function(){"use strict";function n(n){let t=this;t.loading=!0;t.trips=[];n.get("/api/trips").then(function(n){angular.copy(n.data,t.trips)},function(){t.errorMessage="Failed to load trips"}).finally(function(){t.loading=!1;console.log(response)});t.newTrip={};t.addTrip=function(){t.newTrip.dateCreated=new Date;n.post("/api/trips/add",t.newTrip).then(function(){t.trips.push(t.newTrip)},function(){t.errorMessage="Failed to post new trip"}).finally(function(){t.newTrip={}})}}angular.module("app-trips").controller("tripsController",n)}(),function(){"use strict";function t(t,i){let r=this;r.isBusy=!0;r.stops=[];r.errorMessage="";r.tripName=t.tripName;r.newStop={};r.tripUrl="/api/trips/"+r.tripName+"/stops";i.get(r.tripUrl).then(function(t){angular.copy(t.data,r.stops);n(r.stops)},function(){r.errorMessage="Failed to load stops"}).finally(function(){r.isBusy=!1});r.addStop=function(){r.isBusy=!0;i.post(r.tripUrl+"/add",r.newStop).then(function(t){r.stops.push(t.data);n(r.stops);r.newStop={}},function(){r.errorMessage="Failed to add new stop"}).finally(function(){r.isBUsy=!1})}}function n(n){if(n&&n.length>0){let t=_.map(n,function(n){return{lat:n.latitude,long:n.longitude,info:n.name}});travelMap.createMap({stops:t,selector:"#map",currentStop:1,initialZoom:3})}}angular.module("app-trips").controller("tripEditorController",t)}();